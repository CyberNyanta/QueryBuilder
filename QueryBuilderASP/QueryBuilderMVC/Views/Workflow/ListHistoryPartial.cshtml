@model QueryBuilderMVC.Models.ProjectViewModel

@if (Request.IsAuthenticated && Model.IdCurrentProject != 0 && Model.QueryHistory!=null)
{
	foreach (var item in Model.QueryHistory)
	{

        <div style="width:100%; border-bottom: solid 1px gray; height: 25px; font-size:14px;">
                <div class="HistoryQuery" title='@item.QueryBody' data-textquery='@item.QueryBody'>

					@item.QueryDate.ToString("M/dd/yyyy HH:mm")
                </div>
        </div>
        <br/>

    }
}

<script type="text/javascript">
window.onload = function(){
    var As = document.getElementsByClassName('HistoryQuery');
	for(var i = 0, l = As.length; i < l; i ++){
		As[i].onclick = function(){
		    return function () {
		        var query = ($(this).data("textquery"));
		        $("#sql-code").val(query);
		        QB.Web.Application.refreshSql();
			}
		}(As[i].href);

		As[i].href = "javascript: void 0";
	}
}
</script>